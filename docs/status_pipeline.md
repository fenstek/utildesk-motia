# Utildesk Motia — Status Pipeline (Final)

> Цель: строгий пайплайн без попыток «дожимать 20/20». Статусы управляют публикацией, дедупликацией и ручным/дорогим разбором.

## Таблица жизненного цикла статусов

| Status | Generate Pages? | Autogen Blocks Dupes? | Picked by Publisher? | Terminal? |
|---|---:|---:|---:|---:|
| **NEW** | ✅ Yes | ✅ Yes | ✅ Yes | No |
| **IN_PROGRESS** | ⏳ Processing | ✅ Yes | ❌ No | No |
| **DONE** | ✅ Already done | ✅ Yes | ❌ No | Yes |
| **ERROR** | ❌ No | ✅ Yes | ❌ No | No |
| **NEEDS_REVIEW** | ❌ No | ✅ Yes | ❌ No | No |
| **REBUILD** | ❌ No | ✅ Yes | ❌ No | No |
| **DISABLED** | ❌ No | ✅ Yes | ❌ No | No |
| **BLACKLIST** | ❌ Never | ❌ No | ❌ No | Yes |

## Семантика (коротко)

### BLACKLIST
- **Для чего:** неверная сущность Wikidata / не AI-инструмент / алгоритм или софт вне продуктовой дефиниции.
- **Эффект:**
  - никогда не публикуется;
  - никогда не подхватывается publisher’ом;
  - **не участвует в дедупликации автогена** (чтобы позже можно было добавить исправленную запись с другим QID/URL).
- **Состояние:** терминальное.

### NEEDS_REVIEW
- **Для чего:** сомнительная сущность или подозрительный `official_url`.
- **Эффект:** публикацию блокирует до ручного решения: `REBUILD`, `NEW` или `BLACKLIST`.

### REBUILD
- **Для чего:** AI-инструмент валидный, но данные неверные или устаревшие (особенно `official_url`).
- **Эффект:** публикацию блокирует до исправления, затем статус возвращается в `NEW`.

### DISABLED
- **Для чего:** валидный инструмент, но вручную выключен.
- **Эффект:** не публикуется, пока вручную не вернуть в `NEW`.

## Что попадает на сайт (MVP правило)
- Публикуется **только** то, что прошло пайплайн и имеет статус **DONE**.
- **NEEDS_REVIEW / REBUILD / DISABLED / BLACKLIST / ERROR** на сайт **не попадают**.

## Практический цикл
1) Autogen создаёт запись → `NEW`
2) Publisher берёт `NEW` → `IN_PROGRESS` → генерация → `DONE`
3) Не AI / неверная сущность → `BLACKLIST`
4) Сомнительно → `NEEDS_REVIEW`
5) AI, но плохие данные → `REBUILD` → фикc → `NEW`
