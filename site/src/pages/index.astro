---
import BaseLayout from "../layouts/BaseLayout.astro";
import { readdir } from "node:fs/promises";
import { join } from "node:path";
import matter from "gray-matter";

const toolsDir = join(process.cwd(), "content", "tools");
const files = (await readdir(toolsDir))
  .filter((f) => f.endsWith(".md") && !f.startsWith("_"));

const tools = await Promise.all(
  files.map(async (file) => {
    const full = join(toolsDir, file);
    const raw = await (await import("node:fs/promises")).readFile(full, "utf-8");
    const { data } = matter(raw);
    const slug = String(data.slug ?? file.replace(/\.md$/, ""));
    const title = String(data.title ?? slug);
    const image = data.image ? String(data.image) : null;
    const category = data.category ? String(data.category) : null;
    return { slug, title, image, category };
  })
);

tools.sort((a, b) => a.title.localeCompare(b.title, "de"));
const latestTools = tools.slice(0, 6);
---

<BaseLayout
  title="Utildesk â€” Tool-Verzeichnis fÃ¼r AI & ProduktivitÃ¤t"
  description="Kuratiertes Verzeichnis fÃ¼r AI-Tools, Automatisierung und ProduktivitÃ¤ts-Software. Finden Sie die besten Tools fÃ¼r Ihre Arbeit."
>
  <div class="hero">
    <div class="badge">Utildesk Â· Tool Directory</div>
    <h1 class="hero-title">Tools & Guides fÃ¼r AI, Automatisierung und ProduktivitÃ¤t</h1>
    <p class="hero-lead">
      Entdecken Sie kuratierte Tools und Ressourcen, die Ihnen helfen, effizienter zu arbeiten.
      Von AI-Assistenten bis zu Workflow-Automatisierung.
    </p>
    <div class="hero-actions">
      <a href="/tools/" class="btn btn-primary">Zum Tool-Verzeichnis â†’</a>
    </div>
  </div>

  <section class="features">
    <div class="feature-card card">
      <div class="feature-icon">ðŸ¤–</div>
      <h3>AI-Tools</h3>
      <p>
        Moderne KI-Assistenten und Machine-Learning-Plattformen fÃ¼r Content-Erstellung,
        Code-Generierung und Datenanalyse.
      </p>
    </div>

    <div class="feature-card card">
      <div class="feature-icon">âš¡</div>
      <h3>Automatisierung</h3>
      <p>
        Workflow-Automation und No-Code-Plattformen, die repetitive Aufgaben eliminieren
        und Ihre ProduktivitÃ¤t steigern.
      </p>
    </div>

    <div class="feature-card card">
      <div class="feature-icon">ðŸŽ¯</div>
      <h3>ProduktivitÃ¤t</h3>
      <p>
        SorgfÃ¤ltig ausgewÃ¤hlte Tools fÃ¼r Projektmanagement, Zeiterfassung und
        Teamkollaboration.
      </p>
    </div>
  </section>

  <section class="latest-tools">
    <div class="section-header">
      <h2 class="section-title">Neueste Tools</h2>
      <a href="/tools/" class="section-link">Alle Tools â†’</a>
    </div>

    <ul class="tools-grid">
      {latestTools.map((tool) => (
        <li class="card">
          <a class="tool-card" href={"/tools/" + tool.slug + "/"}>
            <div class="tool-thumb">
              {tool.image ? (
                <img src={tool.image} alt={tool.title} />
              ) : null}
            </div>
            <div class="tool-info">
              <p class="tool-title">{tool.title}</p>
              {tool.category ? (
                <span class="tool-badge">{tool.category}</span>
              ) : null}
            </div>
          </a>
        </li>
      ))}
    </ul>
  </section>
</BaseLayout>
